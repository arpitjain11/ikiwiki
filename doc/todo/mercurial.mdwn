* Need to get post commit hook working (or an example of how to use it.)
  * See below. --[[bma]]
* rcs_notify is not implemented (not needed in this branch --[[Joey]])
* Is the code sufficiently robust? It just warns when mercurial fails.
* When rcs_commit is called with a $user that is an openid, it will be
  passed through to mercurial -u. Will mercurial choke on this?
 * Nope. Mercurial doesn't expect any particular format for the username, 
   though "Name <address@domain>" is standard. --[[bma]]
* The way `-u $user` is passed to `hg commit`, there's no way to tell
  if a given commit came in over the web or was done directly. So
  rcs_recentchanges hardcodes 'committype => "mercurial"'. See the monotone
  backend for an example of one that does this right.
* The rcs_commit implementation seems not to notice if the file has been
  changed since a web edit started. Unlike all the other frontends, which
  use the rcstoken to detect if the web commit started editing an earlier
  version of the file, and if so, merge the two sets of changes together.
  It seems that with the current mercurial commit code, it will always
  blindly overwrite the current file with the web edited version, losing
  any other changes.

Posthook: in `$srcdir/.hg/hgrc`, I have the following

    [hooks]
    incoming.update = hg up
    update.ikiwiki = ikiwiki --setup /path/to/ikiwiki.setup --refresh

This should update the working directory and run ikiwiki every time a change is recorded (someone who knows mercurial better than I do may be able to suggest a better way, but this works for me.)

> Try running it with --post-commit instead of --refresh. That should
> work better, handling both the case where the edit was made via the web
> and then committed, and the case where a commit was made directly.
> It can deadlock if the post-commit hook runs with --refresh in the
> former case. --[[Joey]]
